## HTTP 协议特点

HTTP 协议用于客户端与服务器端进行通信。

请求从客户端发出，服务器端响应该请求并返回。

**请求报文：Request Method(GET/POST)、Request URI、Request Version、可选的请求首部字段、Content(内容实体)。**

**响应报文：协议版本、状态码、用以解释状态码的原因短语、可选的响应首部字段以及实体主体构成。**

HTTP 是一种不保存状态，即无状态协议。换句话说，HTTP 协议自身不具备保存之前发送过的请求或响应的功能。

HTTP/1.1 虽然无状态协议，但为了实现期望的保存状态功能，所以引入了**Cookie 技术**。

HTTP 协议使用 URI(统一资源标识符) 让客户端定位到资源。

## HTTP/1.1 的方法

* GET

GET 方法用来向指定的 URI 请求资源，可以带参数，参数是明文传递，安全性不高；也可以不带参数。

幂等是指多个请求返回相同的结果。

* POST

POST 用于向服务器提交数据，通常用于表单发送。

* PUT

PUT 方法用来传输文件。要求在请求报文的主体中包含文件内容，然后保存到请求 URI 指定的位置。

鉴于 HTTP/1.1 的 PUT 方法自身不带验证机制，任何人都可以上传文件，存在安全性问题，因此一般的 Web 网站不使用该方法。

若配合 Web 应用程序的验证机制，或架构设计采用 REST(REpresentational State Transfer，表征状态转移) 标准的同类 Web 网站，就可能会开放使用 PUT 方法。

* HEAD

HEAD 方法获取报文首部。与 GET 方法一样，不返回报文主体部分。用于确认 URI 的有效性及资源更新的日期时间等。

* DELETE

DELETE 方法用于删除文件，与 PUT 相反的方法。DELETE 方法按请求 URI 删除指定的资源。也是不带验证机制。

```
返回状态码：

* 200：表示删除请求被成功执行，返回被删除的资源
* 202：表示删除请求被接受，但还没有被执行
* 204：表示删除请求被执行，但没有返回被删除的资源
```

* OPTIONS

OPTIONS 方法用来查询针对请求 URI 指定的资源支持的方法。

* TRACE

TRACE 方法是让 Web 服务器端将之前的请求通信环回给客户端的方法。

TRACE 方法本来不怎么常用，再加上它容易引发 XST(Cross-Site Tracing, 跨站追踪) 攻击，通常不会用到。

* CONNECT

CONNECT 方法是要求在于代理服务器通信时建立隧道，实现用隧道协议进行 TCP 通信。

主要用 SSL 和 TLS(Transport Layer Security, 传输层安全) 协议把通信内容加密后经网络隧道传输。

```
GET 和 POST 的区别？

GET 和 POST 都是向服务器请求 web 资源，但是两者本质区别在于数据传递上。

* GET 请求消息中没有实体内容，如果向服务器传递数据，只能在请求的 URL 地址后以 ? 的形式带上提交服务器的数据，
  多个数据以 & 进行分隔
  
* GET 方式的特点是在 URL 地址后附带的参数是有限制的，其数据容量通常不能超过 1K

* POST 请求消息可以带实体内容，所以可以在请求的实体内容包含向服务器发送的数据

* POST 方式的特点是传送的数据量无限制
```

## 持续连接(HTTP Persistent Connections)

HTTP 协议的早期版本，每进行一次 HTTP 通信就要断开一次 TCP 连接。这样造成通信量的开销。

那么如何解决上述 TCP 连接的问题，使用 **持续连接(HTTP keep-alive)** 方法，其特点是只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。

持续连接的好处在于减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。

## 管线化(pipelining)

并行发送多个请求，而不需要一个接一个地等待响应。

## Cookie

HTTP 无状态协议，由于不保存状态，自然可以减少服务器的 CPU 及内存资源的消耗。

引入 Cookie 技术，通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态。

**Cookie 原理：**

客户端发送请求报文，该报文并没有带有 Cookie 信息，然后服务器端生成 Cookie 信息。

Cookie 会根据从服务器端发送的响应报文内的一个 Set-Cookie 的首部字段信息，通知客户端保存 Cookie。

当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入 Cookie 值后发送出去。

服务器端发现客户端发送过来的 Cookie 后，会去检查究竟是从哪一个客户端发来的连接请求，然后对比服务器上的记录，最后得到之前的状态信息。




