## HTTP 报文

用于 HTTP 协议交互的信息被称为 HTTP 报文。

请求报文：客户端的 HTTP 报文。

响应报文：服务器端的 HTTP 报文。

HTTP 报文本身是由多行(用 CR+LF 作换行符) 数据构成的字符串文本。

HTTP 报文大致分为 报文首部 和 报文主体 两块。

其中报文首部包括请求行、状态行、首部字段(通用首部、请求首部、响应首部和实体首部)等。

**报文(message)** 是 HTTP 通信中的基本单位，由 8 位组字节流组成，通过 HTTP 通信传输。

**实体(entity)** 是作为请求或响应的有效载荷数据被传输，其内容由实体首部和实体主体组成。

## HTTP 机制

* 压缩传输的内容编码

HTTP 协议中有一种被称为内容编码的功能，它指明应用在实体内容上的编码格式，并保持实体信息原样压缩。内容编码后的实体由客户端接收并复制解码。

* 分块传输编码

分块传输编码会将实体主体分成多个部分(块)。每一块都会用十六进制来标记块的大小。使用分块传输编码的实体主体会由接收的客户端负责解码，恢复到编码前的实体主体。

* 发送多种数据的多部分对象集合

HTTP 协议中使用多部分对象集合，发送的一份报文主体内可含有多类型实体。通常是在图片或文本文件等上传时使用。

* 获取部分内容的范围请求

执行范围请求时，会用到首部字段 Range 来指定资源的 byte 范围。

* 内容协商返回最合适的内容

内容协商机制是指客户端和服务端就响应的资源内容进行交涉，然后提供给客户端最为适合的资源。

